{"ast":null,"code":"var _jsxFileName = \"/Users/andrewyoung/escortverif/client/src/ProviderSignUp.js\";\nimport React, { Component } from \"react\";\nimport Header from \"./Header\";\nimport { Input, Checkbox, Select, MenuItem } from \"@material-ui/core\";\nimport ProviderInput from \"./ProviderInput\";\nimport checkEmail from \"./functions/checkEmail\";\nimport * as firebase from \"firebase\";\nimport Camera from \"react-html5-camera-photo\";\nimport CropImage from \"./CropImage\";\nimport { isMobile } from \"react-device-detect\";\nimport \"react-html5-camera-photo/build/css/index.css\";\nimport \"./css/ProviderSignUp.css\";\nimport ProgressBar from \"./ProgressBar\";\nexport default class ProviderSignUp extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      uploadingPicture: false,\n      uploadingFile: true,\n      croppingPicture: false,\n      currentInput: 0,\n      activePictureUri: \"\",\n      activePosePictureUri: \"\",\n      name: \"\",\n      escoraId: \"\",\n      croppedImg: \"\"\n    };\n  }\n\n  render() {\n    const {\n      uploadingPicture,\n      uploadingFile,\n      croppingPicture,\n      currentInput,\n      activePictureUri,\n      activePosePictureUri,\n      name,\n      escoraId\n    } = this.state;\n    const {\n      profileData\n    } = this.props;\n\n    if (profileData) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Header, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          height: 80\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 11\n        }\n      }), currentInput === 0 && /*#__PURE__*/React.createElement(ProviderInput, {\n        prevDisabled: true,\n        clickPrev: () => this.clickPrev(),\n        clickNext: () => this.sendEmail(),\n        title: \"What's your email?\",\n        subTitle: \"\",\n        input: /*#__PURE__*/React.createElement(Input, {\n          id: \"email-input\",\n          style: {\n            width: 300,\n            fontSize: 18\n          },\n          type: \"email\",\n          placeholder: \"Email\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 17\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 13\n        }\n      }), currentInput === 1 && /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          width: \"100vw\",\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          marginTop: 100\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          textAlign: \"center\",\n          width: \"30vw\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 15\n        }\n      }, \"We sent you an email! \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 39\n        }\n      }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 46\n        }\n      }), \"Please click the link to verify it.\")));\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Header, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          height: 80\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }\n      }), currentInput === 0 && /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(ProgressBar, {\n        currentIndex: 1,\n        total: 4,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(ProviderInput, {\n        clickPrev: () => this.clickPrev(),\n        clickNext: () => this.clickNext(),\n        prevDisabled: true,\n        nextDisabled: name === \"\",\n        title: \"What escort name do you go by?\",\n        subTitle: \"\",\n        input: /*#__PURE__*/React.createElement(Input, {\n          value: name,\n          onChange: word => this.setState({\n            name: word.target.value\n          }),\n          style: {\n            width: 250,\n            fontSize: 18\n          },\n          type: \"text\",\n          placeholder: \"Escort name\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 19\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 15\n        }\n      })), currentInput === 1 && /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(ProgressBar, {\n        currentIndex: 2,\n        total: 4,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(ProviderInput, {\n        clickPrev: () => this.clickPrev(),\n        clickNext: () => this.clickNext(),\n        prevDisabled: true,\n        nextDisabled: escoraId === \"\",\n        title: \"Make an Escora id\",\n        subTitle: /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 19\n          }\n        }, \"This is the link you send your clients:\", /*#__PURE__*/React.createElement(\"div\", {\n          style: {\n            fontWeight: 600,\n            marginTop: 5\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 21\n          }\n        }, \"escora.io/\" + escoraId)),\n        input: /*#__PURE__*/React.createElement(Input, {\n          value: escoraId,\n          onChange: word => {\n            const value = word.target.value;\n            var letterNumber = /^[0-9a-zA-Z]+$/;\n\n            if (value.match(letterNumber) || value === \"\") {\n              this.setState({\n                escoraId: word.target.value.toLocaleLowerCase()\n              });\n            }\n          },\n          style: {\n            width: 250,\n            fontSize: 18\n          },\n          type: \"text\",\n          placeholder: \"Escora id\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 19\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 15\n        }\n      })), currentInput === 2 && /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(ProgressBar, {\n        currentIndex: 3,\n        total: 4,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(ProviderInput, {\n        prevDisabled: false,\n        clickPrev: () => this.clickPrev(),\n        clickNext: () => this.clickNext(),\n        nextDisabled: activePosePictureUri === \"\" || croppingPicture,\n        title: \"Please upload a picture of you\",\n        subTitle: \"This is used for Lisa's (and other Escorts) verification of what you look like. Nobody can see this, except escorts you choose to share it with.\",\n        input: /*#__PURE__*/React.createElement(\"div\", {\n          style: {\n            display: \"flex\",\n            flexDirection: \"column\",\n            justifyContent: \"center\",\n            alignItems: \"center\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 19\n          }\n        }, uploadingPicture && /*#__PURE__*/React.createElement(\"div\", {\n          id: isMobile ? \"camera-mobile\" : \"camera\",\n          style: {\n            display: \"flex\",\n            flexDirection: \"column\",\n            alignItems: \"center\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 23\n          }\n        }, !activePosePictureUri && /*#__PURE__*/React.createElement(Camera, {\n          onCameraStop: () => console.log(\"\"),\n          oncameraError: () => console.log(\"\") // isImageMirror={false}\n          // idealFacingMode={\"environment\"}\n          ,\n          onTakePhoto: dataUri => this.handleTakePhoto(dataUri, \"activePosePictureUri\"),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 27\n          }\n        }), /*#__PURE__*/React.createElement(CropImage, {\n          showCroppedImage: !croppingPicture,\n          showOriginalImage: croppingPicture,\n          setCroppedImg: croppedImgUrl => this.setCroppedImg(croppedImgUrl),\n          picture: activePosePictureUri,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 25\n          }\n        }), croppingPicture && /*#__PURE__*/React.createElement(\"div\", {\n          onClick: () => this.setState({\n            croppingPicture: false\n          }),\n          id: \"button\",\n          style: {\n            marginTop: 5,\n            borderRadius: 5,\n            backgroundColor: \"#008489\",\n            color: \"white\",\n            padding: 10,\n            fontSize: 18,\n            fontWeight: 500,\n            display: \"flex\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n            marginBottom: 40\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 27\n          }\n        }, \"DONE CROPPING\"), !croppingPicture && /*#__PURE__*/React.createElement(\"div\", {\n          style: {\n            display: \"flex\",\n            flexDirection: \"column\",\n            alignItems: \"center\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 27\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          style: {\n            fontSize: 18,\n            marginTop: 30,\n            fontWeight: 500\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 29\n          }\n        }, \"OR\"), /*#__PURE__*/React.createElement(\"div\", {\n          onClick: () => this.setState({\n            uploadingFile: true,\n            uploadingPicture: false,\n            activePosePictureUri: \"\"\n          }),\n          id: \"button\",\n          style: {\n            marginTop: 20,\n            borderRadius: 5,\n            backgroundColor: \"#a1a1a1\",\n            color: \"white\",\n            padding: 10,\n            fontSize: 18,\n            fontWeight: 500,\n            display: \"flex\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n            width: 170,\n            marginBottom: 40\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 29\n          }\n        }, \"Upload a photo\"))), uploadingFile && /*#__PURE__*/React.createElement(\"div\", {\n          style: {\n            display: \"flex\",\n            flexDirection: \"column\",\n            alignItems: \"center\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(Input, {\n          id: \"pic-input\",\n          onChangeCapture: () => this.uploadedImage(\"activePosePictureUri\"),\n          type: \"file\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 25\n          }\n        }), /*#__PURE__*/React.createElement(CropImage, {\n          showCroppedImage: !croppingPicture,\n          showOriginalImage: croppingPicture,\n          setCroppedImg: croppedImgUrl => this.setCroppedImg(croppedImgUrl),\n          picture: activePosePictureUri,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 25\n          }\n        }), croppingPicture && /*#__PURE__*/React.createElement(\"div\", {\n          onClick: () => this.setState({\n            croppingPicture: false\n          }),\n          id: \"button\",\n          style: {\n            marginTop: 5,\n            borderRadius: 5,\n            backgroundColor: \"#008489\",\n            color: \"white\",\n            padding: 10,\n            fontSize: 18,\n            fontWeight: 500,\n            display: \"flex\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n            marginBottom: 40\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 27\n          }\n        }, \"DONE CROPPING\"), !croppingPicture && /*#__PURE__*/React.createElement(\"div\", {\n          style: {\n            display: \"flex\",\n            flexDirection: \"column\",\n            alignItems: \"center\",\n            marginTop: 20\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 27\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          style: {\n            fontSize: 18,\n            fontWeight: 500\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 29\n          }\n        }, \"OR\"), /*#__PURE__*/React.createElement(\"div\", {\n          onClick: () => this.setState({\n            uploadingFile: false,\n            uploadingPicture: true,\n            activePosePictureUri: \"\"\n          }),\n          id: \"button\",\n          style: {\n            marginTop: 20,\n            borderRadius: 5,\n            backgroundColor: \"#a1a1a1\",\n            color: \"white\",\n            padding: 10,\n            fontSize: 18,\n            fontWeight: 500,\n            display: \"flex\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n            marginBottom: 40\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 29\n          }\n        }, \"Take a picture here\")))),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          width: \"100vw\",\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          marginTop: 100\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          textAlign: \"center\",\n          width: \"30vw\",\n          fontSize: 12\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 13\n        }\n      }, \"We don't share this information with anyone, and we take as little info as possible.\")));\n    }\n  }\n\n  uploadedImage(state) {\n    const ref = document.getElementById(\"pic-input\").files;\n\n    if (ref.length === 0) {\n      return;\n    }\n\n    const image = ref[0];\n    console.log(image);\n    const blob = URL.createObjectURL(image);\n\n    if (!image || !blob) {\n      return;\n    }\n\n    this.setState({\n      [state]: blob,\n      activeImage: image,\n      croppingPicture: true\n    });\n  }\n\n  setCroppedImg(croppedImgUrl) {\n    this.setState({\n      croppedImg: croppedImgUrl\n    });\n  }\n\n  handleTakePhoto(dataUri, type) {\n    this.setState({\n      [type]: dataUri,\n      croppingPicture: true\n    });\n  }\n\n  clickPrev() {\n    const {\n      currentInput\n    } = this.state;\n    this.setState({\n      currentInput: currentInput - 1\n    });\n  }\n\n  async updateDatabase() {\n    const {\n      currentInput,\n      name,\n      escoraId,\n      croppedImg\n    } = this.state;\n    const myDocRef = firebase.firestore().collection(\"Providers\").doc(\"abc\");\n\n    if (currentInput === 0) {\n      await myDocRef.update({\n        first_name: name\n      });\n    } else if (currentInput === 1) {\n      await myDocRef.update({\n        escora_id: escoraId\n      });\n    } else if (currentInput === 2) {\n      console.log(croppedImg);\n      const storageRef = firebase.storage().ref().child(\"abc\").child(\"profile_picture\");\n      await storageRef.put(croppedImg);\n      const url = await storageRef.getDownloadURL();\n      await myDocRef.update({\n        picture: url\n      });\n    } else if (currentInput === 3) {} else if (currentInput === 4) {} else {}\n  }\n\n  sendEmail() {\n    const {\n      currentInput\n    } = this.state;\n\n    if (currentInput === 0) {\n      const email = document.getElementById(\"email-input\").value; // Bad email?\n\n      if (!checkEmail(email)) {\n        return;\n      }\n\n      this.sendSignInLinkToEmail(email);\n    }\n  } // Next button clicked!\n\n\n  async clickNext() {\n    const {\n      currentInput\n    } = this.state; // What input are we on?\n\n    await this.updateDatabase();\n    this.setState({\n      currentInput: currentInput + 1\n    });\n  } // Send the sign in link to our email\n\n\n  sendSignInLinkToEmail(email) {\n    var actionCodeSettings = {\n      // URL you want to redirect back to. The domain (www.example.com) for this\n      // URL must be whitelisted in the Firebase Console.\n      url: \"https://escora.io/verifyemail?email=\" + email,\n      // This must be true.\n      handleCodeInApp: true\n    }; // Get our actioncode settings\n    // Send the link in the email\n\n    firebase.auth().sendSignInLinkToEmail(email, actionCodeSettings).then(() => {\n      window.localStorage.setItem(\"email\", email);\n      this.setState({\n        currentInput: this.state.currentInput + 1\n      });\n    }).catch(e => {\n      console.log(e.message);\n      alert(\"Something happened. Try again.\");\n    });\n  }\n\n}","map":{"version":3,"sources":["/Users/andrewyoung/escortverif/client/src/ProviderSignUp.js"],"names":["React","Component","Header","Input","Checkbox","Select","MenuItem","ProviderInput","checkEmail","firebase","Camera","CropImage","isMobile","ProgressBar","ProviderSignUp","constructor","props","state","uploadingPicture","uploadingFile","croppingPicture","currentInput","activePictureUri","activePosePictureUri","name","escoraId","croppedImg","render","profileData","height","clickPrev","sendEmail","width","fontSize","display","alignItems","justifyContent","marginTop","textAlign","clickNext","word","setState","target","value","fontWeight","letterNumber","match","toLocaleLowerCase","flexDirection","console","log","dataUri","handleTakePhoto","croppedImgUrl","setCroppedImg","borderRadius","backgroundColor","color","padding","marginBottom","uploadedImage","ref","document","getElementById","files","length","image","blob","URL","createObjectURL","activeImage","type","updateDatabase","myDocRef","firestore","collection","doc","update","first_name","escora_id","storageRef","storage","child","put","url","getDownloadURL","picture","email","sendSignInLinkToEmail","actionCodeSettings","handleCodeInApp","auth","then","window","localStorage","setItem","catch","e","message","alert"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,SAASC,KAAT,EAAgBC,QAAhB,EAA0BC,MAA1B,EAAkCC,QAAlC,QAAkD,mBAAlD;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,OAAOC,UAAP,MAAuB,wBAAvB;AACA,OAAO,KAAKC,QAAZ,MAA0B,UAA1B;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,SAASC,QAAT,QAAyB,qBAAzB;AACA,OAAO,8CAAP;AACA,OAAO,0BAAP;AACA,OAAOC,WAAP,MAAwB,eAAxB;AAEA,eAAe,MAAMC,cAAN,SAA6Bb,SAA7B,CAAuC;AACpDc,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AAEA,SAAKC,KAAL,GAAa;AACXC,MAAAA,gBAAgB,EAAE,KADP;AAEXC,MAAAA,aAAa,EAAE,IAFJ;AAGXC,MAAAA,eAAe,EAAE,KAHN;AAIXC,MAAAA,YAAY,EAAE,CAJH;AAKXC,MAAAA,gBAAgB,EAAE,EALP;AAMXC,MAAAA,oBAAoB,EAAE,EANX;AAOXC,MAAAA,IAAI,EAAE,EAPK;AAQXC,MAAAA,QAAQ,EAAE,EARC;AASXC,MAAAA,UAAU,EAAE;AATD,KAAb;AAWD;;AAEDC,EAAAA,MAAM,GAAG;AACP,UAAM;AACJT,MAAAA,gBADI;AAEJC,MAAAA,aAFI;AAGJC,MAAAA,eAHI;AAIJC,MAAAA,YAJI;AAKJC,MAAAA,gBALI;AAMJC,MAAAA,oBANI;AAOJC,MAAAA,IAPI;AAQJC,MAAAA;AARI,QASF,KAAKR,KATT;AAUA,UAAM;AAAEW,MAAAA;AAAF,QAAkB,KAAKZ,KAA7B;;AAEA,QAAIY,WAAJ,EAAiB;AACf,0BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAEE;AAAK,QAAA,KAAK,EAAE;AAAEC,UAAAA,MAAM,EAAE;AAAV,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,EAGGR,YAAY,KAAK,CAAjB,iBACC,oBAAC,aAAD;AACE,QAAA,YAAY,EAAE,IADhB;AAEE,QAAA,SAAS,EAAE,MAAM,KAAKS,SAAL,EAFnB;AAGE,QAAA,SAAS,EAAE,MAAM,KAAKC,SAAL,EAHnB;AAIE,QAAA,KAAK,EAAE,oBAJT;AAKE,QAAA,QAAQ,EAAE,EALZ;AAME,QAAA,KAAK,eACH,oBAAC,KAAD;AACE,UAAA,EAAE,EAAC,aADL;AAEE,UAAA,KAAK,EAAE;AAAEC,YAAAA,KAAK,EAAE,GAAT;AAAcC,YAAAA,QAAQ,EAAE;AAAxB,WAFT;AAGE,UAAA,IAAI,EAAC,OAHP;AAIE,UAAA,WAAW,EAAC,OAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAPJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJJ,EAqBGZ,YAAY,KAAK,CAAjB,iBACC;AACE,QAAA,KAAK,EAAE;AACLW,UAAAA,KAAK,EAAE,OADF;AAELE,UAAAA,OAAO,EAAE,MAFJ;AAGLC,UAAAA,UAAU,EAAE,QAHP;AAILC,UAAAA,cAAc,EAAE,QAJX;AAKLC,UAAAA,SAAS,EAAE;AALN,SADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBASE;AAAK,QAAA,KAAK,EAAE;AAAEC,UAAAA,SAAS,EAAE,QAAb;AAAuBN,UAAAA,KAAK,EAAE;AAA9B,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gDACwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADxB,oBAC+B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAD/B,wCATF,CAtBJ,CADF;AAwCD,KAzCD,MAyCO;AACL,0BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAEE;AAAK,QAAA,KAAK,EAAE;AAAEH,UAAAA,MAAM,EAAE;AAAV,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,EAIGR,YAAY,KAAK,CAAjB,iBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,WAAD;AAAa,QAAA,YAAY,EAAE,CAA3B;AAA8B,QAAA,KAAK,EAAE,CAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAGE,oBAAC,aAAD;AACE,QAAA,SAAS,EAAE,MAAM,KAAKS,SAAL,EADnB;AAEE,QAAA,SAAS,EAAE,MAAM,KAAKS,SAAL,EAFnB;AAGE,QAAA,YAAY,EAAE,IAHhB;AAIE,QAAA,YAAY,EAAEf,IAAI,KAAK,EAJzB;AAKE,QAAA,KAAK,EAAE,gCALT;AAME,QAAA,QAAQ,EAAE,EANZ;AAOE,QAAA,KAAK,eACH,oBAAC,KAAD;AACE,UAAA,KAAK,EAAEA,IADT;AAEE,UAAA,QAAQ,EAAGgB,IAAD,IACR,KAAKC,QAAL,CAAc;AACZjB,YAAAA,IAAI,EAAEgB,IAAI,CAACE,MAAL,CAAYC;AADN,WAAd,CAHJ;AAOE,UAAA,KAAK,EAAE;AAAEX,YAAAA,KAAK,EAAE,GAAT;AAAcC,YAAAA,QAAQ,EAAE;AAAxB,WAPT;AAQE,UAAA,IAAI,EAAC,MARP;AASE,UAAA,WAAW,EAAC,aATd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UARJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHF,CALJ,EA+BGZ,YAAY,KAAK,CAAjB,iBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,WAAD;AAAa,QAAA,YAAY,EAAE,CAA3B;AAA8B,QAAA,KAAK,EAAE,CAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAGE,oBAAC,aAAD;AACE,QAAA,SAAS,EAAE,MAAM,KAAKS,SAAL,EADnB;AAEE,QAAA,SAAS,EAAE,MAAM,KAAKS,SAAL,EAFnB;AAGE,QAAA,YAAY,EAAE,IAHhB;AAIE,QAAA,YAAY,EAAEd,QAAQ,KAAK,EAJ7B;AAKE,QAAA,KAAK,EAAE,mBALT;AAME,QAAA,QAAQ,eACN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mEAEE;AAAK,UAAA,KAAK,EAAE;AAAEmB,YAAAA,UAAU,EAAE,GAAd;AAAmBP,YAAAA,SAAS,EAAE;AAA9B,WAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACG,eAAeZ,QADlB,CAFF,CAPJ;AAcE,QAAA,KAAK,eACH,oBAAC,KAAD;AACE,UAAA,KAAK,EAAEA,QADT;AAEE,UAAA,QAAQ,EAAGe,IAAD,IAAU;AAClB,kBAAMG,KAAK,GAAGH,IAAI,CAACE,MAAL,CAAYC,KAA1B;AACA,gBAAIE,YAAY,GAAG,gBAAnB;;AAEA,gBAAIF,KAAK,CAACG,KAAN,CAAYD,YAAZ,KAA6BF,KAAK,KAAK,EAA3C,EAA+C;AAC7C,mBAAKF,QAAL,CAAc;AACZhB,gBAAAA,QAAQ,EAAEe,IAAI,CAACE,MAAL,CAAYC,KAAZ,CAAkBI,iBAAlB;AADE,eAAd;AAGD;AACF,WAXH;AAYE,UAAA,KAAK,EAAE;AAAEf,YAAAA,KAAK,EAAE,GAAT;AAAcC,YAAAA,QAAQ,EAAE;AAAxB,WAZT;AAaE,UAAA,IAAI,EAAC,MAbP;AAcE,UAAA,WAAW,EAAC,WAdd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAfJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHF,CAhCJ,EAuEGZ,YAAY,KAAK,CAAjB,iBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,WAAD;AAAa,QAAA,YAAY,EAAE,CAA3B;AAA8B,QAAA,KAAK,EAAE,CAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAEE,oBAAC,aAAD;AACE,QAAA,YAAY,EAAE,KADhB;AAEE,QAAA,SAAS,EAAE,MAAM,KAAKS,SAAL,EAFnB;AAGE,QAAA,SAAS,EAAE,MAAM,KAAKS,SAAL,EAHnB;AAIE,QAAA,YAAY,EAAEhB,oBAAoB,KAAK,EAAzB,IAA+BH,eAJ/C;AAKE,QAAA,KAAK,EAAE,gCALT;AAME,QAAA,QAAQ,EACN,kJAPJ;AASE,QAAA,KAAK,eACH;AACE,UAAA,KAAK,EAAE;AACLc,YAAAA,OAAO,EAAE,MADJ;AAELc,YAAAA,aAAa,EAAE,QAFV;AAGLZ,YAAAA,cAAc,EAAE,QAHX;AAILD,YAAAA,UAAU,EAAE;AAJP,WADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAQGjB,gBAAgB,iBACf;AACE,UAAA,EAAE,EAAEN,QAAQ,GAAG,eAAH,GAAqB,QADnC;AAEE,UAAA,KAAK,EAAE;AACLsB,YAAAA,OAAO,EAAE,MADJ;AAELc,YAAAA,aAAa,EAAE,QAFV;AAGLb,YAAAA,UAAU,EAAE;AAHP,WAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAQG,CAACZ,oBAAD,iBACC,oBAAC,MAAD;AACE,UAAA,YAAY,EAAE,MAAM0B,OAAO,CAACC,GAAR,CAAY,EAAZ,CADtB;AAEE,UAAA,aAAa,EAAE,MAAMD,OAAO,CAACC,GAAR,CAAY,EAAZ,CAFvB,CAGE;AACA;AAJF;AAKE,UAAA,WAAW,EAAGC,OAAD,IACX,KAAKC,eAAL,CACED,OADF,EAEE,sBAFF,CANJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UATJ,eAsBE,oBAAC,SAAD;AACE,UAAA,gBAAgB,EAAE,CAAC/B,eADrB;AAEE,UAAA,iBAAiB,EAAEA,eAFrB;AAGE,UAAA,aAAa,EAAGiC,aAAD,IACb,KAAKC,aAAL,CAAmBD,aAAnB,CAJJ;AAME,UAAA,OAAO,EAAE9B,oBANX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAtBF,EA8BGH,eAAe,iBACd;AACE,UAAA,OAAO,EAAE,MACP,KAAKqB,QAAL,CAAc;AACZrB,YAAAA,eAAe,EAAE;AADL,WAAd,CAFJ;AAME,UAAA,EAAE,EAAC,QANL;AAOE,UAAA,KAAK,EAAE;AACLiB,YAAAA,SAAS,EAAE,CADN;AAELkB,YAAAA,YAAY,EAAE,CAFT;AAGLC,YAAAA,eAAe,EAAE,SAHZ;AAILC,YAAAA,KAAK,EAAE,OAJF;AAKLC,YAAAA,OAAO,EAAE,EALJ;AAMLzB,YAAAA,QAAQ,EAAE,EANL;AAOLW,YAAAA,UAAU,EAAE,GAPP;AAQLV,YAAAA,OAAO,EAAE,MARJ;AASLE,YAAAA,cAAc,EAAE,QATX;AAULD,YAAAA,UAAU,EAAE,QAVP;AAWLwB,YAAAA,YAAY,EAAE;AAXT,WAPT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BA/BJ,EAuDG,CAACvC,eAAD,iBACC;AACE,UAAA,KAAK,EAAE;AACLc,YAAAA,OAAO,EAAE,MADJ;AAELc,YAAAA,aAAa,EAAE,QAFV;AAGLb,YAAAA,UAAU,EAAE;AAHP,WADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAOE;AACE,UAAA,KAAK,EAAE;AACLF,YAAAA,QAAQ,EAAE,EADL;AAELI,YAAAA,SAAS,EAAE,EAFN;AAGLO,YAAAA,UAAU,EAAE;AAHP,WADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAPF,eAgBE;AACE,UAAA,OAAO,EAAE,MACP,KAAKH,QAAL,CAAc;AACZtB,YAAAA,aAAa,EAAE,IADH;AAEZD,YAAAA,gBAAgB,EAAE,KAFN;AAGZK,YAAAA,oBAAoB,EAAE;AAHV,WAAd,CAFJ;AAQE,UAAA,EAAE,EAAC,QARL;AASE,UAAA,KAAK,EAAE;AACLc,YAAAA,SAAS,EAAE,EADN;AAELkB,YAAAA,YAAY,EAAE,CAFT;AAGLC,YAAAA,eAAe,EAAE,SAHZ;AAILC,YAAAA,KAAK,EAAE,OAJF;AAKLC,YAAAA,OAAO,EAAE,EALJ;AAMLzB,YAAAA,QAAQ,EAAE,EANL;AAOLW,YAAAA,UAAU,EAAE,GAPP;AAQLV,YAAAA,OAAO,EAAE,MARJ;AASLE,YAAAA,cAAc,EAAE,QATX;AAULD,YAAAA,UAAU,EAAE,QAVP;AAWLH,YAAAA,KAAK,EAAE,GAXF;AAYL2B,YAAAA,YAAY,EAAE;AAZT,WATT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAhBF,CAxDJ,CATJ,EAgHGxC,aAAa,iBACZ;AACE,UAAA,KAAK,EAAE;AACLe,YAAAA,OAAO,EAAE,MADJ;AAELc,YAAAA,aAAa,EAAE,QAFV;AAGLb,YAAAA,UAAU,EAAE;AAHP,WADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAOE,oBAAC,KAAD;AACE,UAAA,EAAE,EAAC,WADL;AAEE,UAAA,eAAe,EAAE,MACf,KAAKyB,aAAL,CAAmB,sBAAnB,CAHJ;AAKE,UAAA,IAAI,EAAC,MALP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAPF,eAcE,oBAAC,SAAD;AACE,UAAA,gBAAgB,EAAE,CAACxC,eADrB;AAEE,UAAA,iBAAiB,EAAEA,eAFrB;AAGE,UAAA,aAAa,EAAGiC,aAAD,IACb,KAAKC,aAAL,CAAmBD,aAAnB,CAJJ;AAME,UAAA,OAAO,EAAE9B,oBANX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAdF,EAuBGH,eAAe,iBACd;AACE,UAAA,OAAO,EAAE,MACP,KAAKqB,QAAL,CAAc;AACZrB,YAAAA,eAAe,EAAE;AADL,WAAd,CAFJ;AAME,UAAA,EAAE,EAAC,QANL;AAOE,UAAA,KAAK,EAAE;AACLiB,YAAAA,SAAS,EAAE,CADN;AAELkB,YAAAA,YAAY,EAAE,CAFT;AAGLC,YAAAA,eAAe,EAAE,SAHZ;AAILC,YAAAA,KAAK,EAAE,OAJF;AAKLC,YAAAA,OAAO,EAAE,EALJ;AAMLzB,YAAAA,QAAQ,EAAE,EANL;AAOLW,YAAAA,UAAU,EAAE,GAPP;AAQLV,YAAAA,OAAO,EAAE,MARJ;AASLE,YAAAA,cAAc,EAAE,QATX;AAULD,YAAAA,UAAU,EAAE,QAVP;AAWLwB,YAAAA,YAAY,EAAE;AAXT,WAPT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAxBJ,EAiDG,CAACvC,eAAD,iBACC;AACE,UAAA,KAAK,EAAE;AACLc,YAAAA,OAAO,EAAE,MADJ;AAELc,YAAAA,aAAa,EAAE,QAFV;AAGLb,YAAAA,UAAU,EAAE,QAHP;AAILE,YAAAA,SAAS,EAAE;AAJN,WADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAQE;AACE,UAAA,KAAK,EAAE;AACLJ,YAAAA,QAAQ,EAAE,EADL;AAELW,YAAAA,UAAU,EAAE;AAFP,WADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBARF,eAgBE;AACE,UAAA,OAAO,EAAE,MACP,KAAKH,QAAL,CAAc;AACZtB,YAAAA,aAAa,EAAE,KADH;AAEZD,YAAAA,gBAAgB,EAAE,IAFN;AAGZK,YAAAA,oBAAoB,EAAE;AAHV,WAAd,CAFJ;AAQE,UAAA,EAAE,EAAC,QARL;AASE,UAAA,KAAK,EAAE;AACLc,YAAAA,SAAS,EAAE,EADN;AAELkB,YAAAA,YAAY,EAAE,CAFT;AAGLC,YAAAA,eAAe,EAAE,SAHZ;AAILC,YAAAA,KAAK,EAAE,OAJF;AAKLC,YAAAA,OAAO,EAAE,EALJ;AAMLzB,YAAAA,QAAQ,EAAE,EANL;AAOLW,YAAAA,UAAU,EAAE,GAPP;AAQLV,YAAAA,OAAO,EAAE,MARJ;AASLE,YAAAA,cAAc,EAAE,QATX;AAULD,YAAAA,UAAU,EAAE,QAVP;AAWLwB,YAAAA,YAAY,EAAE;AAXT,WATT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAhBF,CAlDJ,CAjHJ,CAVJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CAxEJ,eA0SE;AACE,QAAA,KAAK,EAAE;AACL3B,UAAAA,KAAK,EAAE,OADF;AAELE,UAAAA,OAAO,EAAE,MAFJ;AAGLC,UAAAA,UAAU,EAAE,QAHP;AAILC,UAAAA,cAAc,EAAE,QAJX;AAKLC,UAAAA,SAAS,EAAE;AALN,SADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBASE;AAAK,QAAA,KAAK,EAAE;AAAEC,UAAAA,SAAS,EAAE,QAAb;AAAuBN,UAAAA,KAAK,EAAE,MAA9B;AAAsCC,UAAAA,QAAQ,EAAE;AAAhD,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gGATF,CA1SF,CADF;AA2TD;AACF;;AAED2B,EAAAA,aAAa,CAAC3C,KAAD,EAAQ;AACnB,UAAM4C,GAAG,GAAGC,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCC,KAAjD;;AACA,QAAIH,GAAG,CAACI,MAAJ,KAAe,CAAnB,EAAsB;AACpB;AACD;;AACD,UAAMC,KAAK,GAAGL,GAAG,CAAC,CAAD,CAAjB;AACAZ,IAAAA,OAAO,CAACC,GAAR,CAAYgB,KAAZ;AACA,UAAMC,IAAI,GAAGC,GAAG,CAACC,eAAJ,CAAoBH,KAApB,CAAb;;AACA,QAAI,CAACA,KAAD,IAAU,CAACC,IAAf,EAAqB;AACnB;AACD;;AACD,SAAK1B,QAAL,CAAc;AAAE,OAACxB,KAAD,GAASkD,IAAX;AAAiBG,MAAAA,WAAW,EAAEJ,KAA9B;AAAqC9C,MAAAA,eAAe,EAAE;AAAtD,KAAd;AACD;;AAEDkC,EAAAA,aAAa,CAACD,aAAD,EAAgB;AAC3B,SAAKZ,QAAL,CAAc;AACZf,MAAAA,UAAU,EAAE2B;AADA,KAAd;AAGD;;AACDD,EAAAA,eAAe,CAACD,OAAD,EAAUoB,IAAV,EAAgB;AAC7B,SAAK9B,QAAL,CAAc;AACZ,OAAC8B,IAAD,GAAQpB,OADI;AAEZ/B,MAAAA,eAAe,EAAE;AAFL,KAAd;AAID;;AAEDU,EAAAA,SAAS,GAAG;AACV,UAAM;AAAET,MAAAA;AAAF,QAAmB,KAAKJ,KAA9B;AACA,SAAKwB,QAAL,CAAc;AACZpB,MAAAA,YAAY,EAAEA,YAAY,GAAG;AADjB,KAAd;AAGD;;AAED,QAAMmD,cAAN,GAAuB;AACrB,UAAM;AAAEnD,MAAAA,YAAF;AAAgBG,MAAAA,IAAhB;AAAsBC,MAAAA,QAAtB;AAAgCC,MAAAA;AAAhC,QAA+C,KAAKT,KAA1D;AACA,UAAMwD,QAAQ,GAAGhE,QAAQ,CAACiE,SAAT,GAAqBC,UAArB,CAAgC,WAAhC,EAA6CC,GAA7C,CAAiD,KAAjD,CAAjB;;AAEA,QAAIvD,YAAY,KAAK,CAArB,EAAwB;AACtB,YAAMoD,QAAQ,CAACI,MAAT,CAAgB;AACpBC,QAAAA,UAAU,EAAEtD;AADQ,OAAhB,CAAN;AAGD,KAJD,MAIO,IAAIH,YAAY,KAAK,CAArB,EAAwB;AAC7B,YAAMoD,QAAQ,CAACI,MAAT,CAAgB;AACpBE,QAAAA,SAAS,EAAEtD;AADS,OAAhB,CAAN;AAGD,KAJM,MAIA,IAAIJ,YAAY,KAAK,CAArB,EAAwB;AAC7B4B,MAAAA,OAAO,CAACC,GAAR,CAAYxB,UAAZ;AACA,YAAMsD,UAAU,GAAGvE,QAAQ,CACxBwE,OADgB,GAEhBpB,GAFgB,GAGhBqB,KAHgB,CAGV,KAHU,EAIhBA,KAJgB,CAIV,iBAJU,CAAnB;AAMA,YAAMF,UAAU,CAACG,GAAX,CAAezD,UAAf,CAAN;AACA,YAAM0D,GAAG,GAAG,MAAMJ,UAAU,CAACK,cAAX,EAAlB;AACA,YAAMZ,QAAQ,CAACI,MAAT,CAAgB;AACpBS,QAAAA,OAAO,EAAEF;AADW,OAAhB,CAAN;AAGD,KAbM,MAaA,IAAI/D,YAAY,KAAK,CAArB,EAAwB,CAC9B,CADM,MACA,IAAIA,YAAY,KAAK,CAArB,EAAwB,CAC9B,CADM,MACA,CACN;AACF;;AAEDU,EAAAA,SAAS,GAAG;AACV,UAAM;AAAEV,MAAAA;AAAF,QAAmB,KAAKJ,KAA9B;;AACA,QAAII,YAAY,KAAK,CAArB,EAAwB;AACtB,YAAMkE,KAAK,GAAGzB,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCpB,KAArD,CADsB,CAEtB;;AACA,UAAI,CAACnC,UAAU,CAAC+E,KAAD,CAAf,EAAwB;AACtB;AACD;;AACD,WAAKC,qBAAL,CAA2BD,KAA3B;AACD;AACF,GAhdmD,CAkdpD;;;AACA,QAAMhD,SAAN,GAAkB;AAChB,UAAM;AAAElB,MAAAA;AAAF,QAAmB,KAAKJ,KAA9B,CADgB,CAEhB;;AAEA,UAAM,KAAKuD,cAAL,EAAN;AACA,SAAK/B,QAAL,CAAc;AACZpB,MAAAA,YAAY,EAAEA,YAAY,GAAG;AADjB,KAAd;AAGD,GA3dmD,CA6dpD;;;AACAmE,EAAAA,qBAAqB,CAACD,KAAD,EAAQ;AAC3B,QAAIE,kBAAkB,GAAG;AACvB;AACA;AACAL,MAAAA,GAAG,EAAE,yCAAyCG,KAHvB;AAIvB;AACAG,MAAAA,eAAe,EAAE;AALM,KAAzB,CAD2B,CAQ3B;AACA;;AACAjF,IAAAA,QAAQ,CACLkF,IADH,GAEGH,qBAFH,CAEyBD,KAFzB,EAEgCE,kBAFhC,EAGGG,IAHH,CAGQ,MAAM;AACVC,MAAAA,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,OAA5B,EAAqCR,KAArC;AACA,WAAK9C,QAAL,CAAc;AACZpB,QAAAA,YAAY,EAAE,KAAKJ,KAAL,CAAWI,YAAX,GAA0B;AAD5B,OAAd;AAGD,KARH,EASG2E,KATH,CASUC,CAAD,IAAO;AACZhD,MAAAA,OAAO,CAACC,GAAR,CAAY+C,CAAC,CAACC,OAAd;AACAC,MAAAA,KAAK,CAAC,gCAAD,CAAL;AACD,KAZH;AAaD;;AArfmD","sourcesContent":["import React, { Component } from \"react\";\nimport Header from \"./Header\";\nimport { Input, Checkbox, Select, MenuItem } from \"@material-ui/core\";\nimport ProviderInput from \"./ProviderInput\";\nimport checkEmail from \"./functions/checkEmail\";\nimport * as firebase from \"firebase\";\nimport Camera from \"react-html5-camera-photo\";\nimport CropImage from \"./CropImage\";\nimport { isMobile } from \"react-device-detect\";\nimport \"react-html5-camera-photo/build/css/index.css\";\nimport \"./css/ProviderSignUp.css\";\nimport ProgressBar from \"./ProgressBar\";\n\nexport default class ProviderSignUp extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      uploadingPicture: false,\n      uploadingFile: true,\n      croppingPicture: false,\n      currentInput: 0,\n      activePictureUri: \"\",\n      activePosePictureUri: \"\",\n      name: \"\",\n      escoraId: \"\",\n      croppedImg: \"\",\n    };\n  }\n\n  render() {\n    const {\n      uploadingPicture,\n      uploadingFile,\n      croppingPicture,\n      currentInput,\n      activePictureUri,\n      activePosePictureUri,\n      name,\n      escoraId,\n    } = this.state;\n    const { profileData } = this.props;\n\n    if (profileData) {\n      return (\n        <div>\n          <Header />\n          <div style={{ height: 80 }}></div>\n          {currentInput === 0 && (\n            <ProviderInput\n              prevDisabled={true}\n              clickPrev={() => this.clickPrev()}\n              clickNext={() => this.sendEmail()}\n              title={\"What's your email?\"}\n              subTitle={\"\"}\n              input={\n                <Input\n                  id=\"email-input\"\n                  style={{ width: 300, fontSize: 18 }}\n                  type=\"email\"\n                  placeholder=\"Email\"\n                />\n              }\n            />\n          )}\n\n          {currentInput === 1 && (\n            <div\n              style={{\n                width: \"100vw\",\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                marginTop: 100,\n              }}\n            >\n              <div style={{ textAlign: \"center\", width: \"30vw\" }}>\n                We sent you an email! <br /> <br />\n                Please click the link to verify it.\n              </div>\n            </div>\n          )}\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          <Header />\n          <div style={{ height: 80 }}></div>\n\n          {currentInput === 0 && (\n            <div>\n              <ProgressBar currentIndex={1} total={4} />\n\n              <ProviderInput\n                clickPrev={() => this.clickPrev()}\n                clickNext={() => this.clickNext()}\n                prevDisabled={true}\n                nextDisabled={name === \"\"}\n                title={\"What escort name do you go by?\"}\n                subTitle={\"\"}\n                input={\n                  <Input\n                    value={name}\n                    onChange={(word) =>\n                      this.setState({\n                        name: word.target.value,\n                      })\n                    }\n                    style={{ width: 250, fontSize: 18 }}\n                    type=\"text\"\n                    placeholder=\"Escort name\"\n                  />\n                }\n              />\n            </div>\n          )}\n          {currentInput === 1 && (\n            <div>\n              <ProgressBar currentIndex={2} total={4} />\n\n              <ProviderInput\n                clickPrev={() => this.clickPrev()}\n                clickNext={() => this.clickNext()}\n                prevDisabled={true}\n                nextDisabled={escoraId === \"\"}\n                title={\"Make an Escora id\"}\n                subTitle={\n                  <div>\n                    This is the link you send your clients:\n                    <div style={{ fontWeight: 600, marginTop: 5 }}>\n                      {\"escora.io/\" + escoraId}\n                    </div>\n                  </div>\n                }\n                input={\n                  <Input\n                    value={escoraId}\n                    onChange={(word) => {\n                      const value = word.target.value;\n                      var letterNumber = /^[0-9a-zA-Z]+$/;\n\n                      if (value.match(letterNumber) || value === \"\") {\n                        this.setState({\n                          escoraId: word.target.value.toLocaleLowerCase(),\n                        });\n                      }\n                    }}\n                    style={{ width: 250, fontSize: 18 }}\n                    type=\"text\"\n                    placeholder=\"Escora id\"\n                  />\n                }\n              />\n            </div>\n          )}\n\n          {currentInput === 2 && (\n            <div>\n              <ProgressBar currentIndex={3} total={4} />\n              <ProviderInput\n                prevDisabled={false}\n                clickPrev={() => this.clickPrev()}\n                clickNext={() => this.clickNext()}\n                nextDisabled={activePosePictureUri === \"\" || croppingPicture}\n                title={\"Please upload a picture of you\"}\n                subTitle={\n                  \"This is used for Lisa's (and other Escorts) verification of what you look like. Nobody can see this, except escorts you choose to share it with.\"\n                }\n                input={\n                  <div\n                    style={{\n                      display: \"flex\",\n                      flexDirection: \"column\",\n                      justifyContent: \"center\",\n                      alignItems: \"center\",\n                    }}\n                  >\n                    {uploadingPicture && (\n                      <div\n                        id={isMobile ? \"camera-mobile\" : \"camera\"}\n                        style={{\n                          display: \"flex\",\n                          flexDirection: \"column\",\n                          alignItems: \"center\",\n                        }}\n                      >\n                        {!activePosePictureUri && (\n                          <Camera\n                            onCameraStop={() => console.log(\"\")}\n                            oncameraError={() => console.log(\"\")}\n                            // isImageMirror={false}\n                            // idealFacingMode={\"environment\"}\n                            onTakePhoto={(dataUri) =>\n                              this.handleTakePhoto(\n                                dataUri,\n                                \"activePosePictureUri\"\n                              )\n                            }\n                          ></Camera>\n                        )}\n                        <CropImage\n                          showCroppedImage={!croppingPicture}\n                          showOriginalImage={croppingPicture}\n                          setCroppedImg={(croppedImgUrl) =>\n                            this.setCroppedImg(croppedImgUrl)\n                          }\n                          picture={activePosePictureUri}\n                        />\n                        {croppingPicture && (\n                          <div\n                            onClick={() =>\n                              this.setState({\n                                croppingPicture: false,\n                              })\n                            }\n                            id=\"button\"\n                            style={{\n                              marginTop: 5,\n                              borderRadius: 5,\n                              backgroundColor: \"#008489\",\n                              color: \"white\",\n                              padding: 10,\n                              fontSize: 18,\n                              fontWeight: 500,\n                              display: \"flex\",\n                              justifyContent: \"center\",\n                              alignItems: \"center\",\n                              marginBottom: 40,\n                            }}\n                          >\n                            DONE CROPPING\n                          </div>\n                        )}\n                        {!croppingPicture && (\n                          <div\n                            style={{\n                              display: \"flex\",\n                              flexDirection: \"column\",\n                              alignItems: \"center\",\n                            }}\n                          >\n                            <div\n                              style={{\n                                fontSize: 18,\n                                marginTop: 30,\n                                fontWeight: 500,\n                              }}\n                            >\n                              OR\n                            </div>\n                            <div\n                              onClick={() =>\n                                this.setState({\n                                  uploadingFile: true,\n                                  uploadingPicture: false,\n                                  activePosePictureUri: \"\",\n                                })\n                              }\n                              id=\"button\"\n                              style={{\n                                marginTop: 20,\n                                borderRadius: 5,\n                                backgroundColor: \"#a1a1a1\",\n                                color: \"white\",\n                                padding: 10,\n                                fontSize: 18,\n                                fontWeight: 500,\n                                display: \"flex\",\n                                justifyContent: \"center\",\n                                alignItems: \"center\",\n                                width: 170,\n                                marginBottom: 40,\n                              }}\n                            >\n                              Upload a photo\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    )}\n\n                    {uploadingFile && (\n                      <div\n                        style={{\n                          display: \"flex\",\n                          flexDirection: \"column\",\n                          alignItems: \"center\",\n                        }}\n                      >\n                        <Input\n                          id=\"pic-input\"\n                          onChangeCapture={() =>\n                            this.uploadedImage(\"activePosePictureUri\")\n                          }\n                          type=\"file\"\n                        />\n                        <CropImage\n                          showCroppedImage={!croppingPicture}\n                          showOriginalImage={croppingPicture}\n                          setCroppedImg={(croppedImgUrl) =>\n                            this.setCroppedImg(croppedImgUrl)\n                          }\n                          picture={activePosePictureUri}\n                        />\n\n                        {croppingPicture && (\n                          <div\n                            onClick={() =>\n                              this.setState({\n                                croppingPicture: false,\n                              })\n                            }\n                            id=\"button\"\n                            style={{\n                              marginTop: 5,\n                              borderRadius: 5,\n                              backgroundColor: \"#008489\",\n                              color: \"white\",\n                              padding: 10,\n                              fontSize: 18,\n                              fontWeight: 500,\n                              display: \"flex\",\n                              justifyContent: \"center\",\n                              alignItems: \"center\",\n                              marginBottom: 40,\n                            }}\n                          >\n                            DONE CROPPING\n                          </div>\n                        )}\n\n                        {!croppingPicture && (\n                          <div\n                            style={{\n                              display: \"flex\",\n                              flexDirection: \"column\",\n                              alignItems: \"center\",\n                              marginTop: 20,\n                            }}\n                          >\n                            <div\n                              style={{\n                                fontSize: 18,\n                                fontWeight: 500,\n                              }}\n                            >\n                              OR\n                            </div>\n                            <div\n                              onClick={() =>\n                                this.setState({\n                                  uploadingFile: false,\n                                  uploadingPicture: true,\n                                  activePosePictureUri: \"\",\n                                })\n                              }\n                              id=\"button\"\n                              style={{\n                                marginTop: 20,\n                                borderRadius: 5,\n                                backgroundColor: \"#a1a1a1\",\n                                color: \"white\",\n                                padding: 10,\n                                fontSize: 18,\n                                fontWeight: 500,\n                                display: \"flex\",\n                                justifyContent: \"center\",\n                                alignItems: \"center\",\n                                marginBottom: 40,\n                              }}\n                            >\n                              Take a picture here\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    )}\n                  </div>\n                }\n              />\n            </div>\n          )}\n\n          <div\n            style={{\n              width: \"100vw\",\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              marginTop: 100,\n            }}\n          >\n            <div style={{ textAlign: \"center\", width: \"30vw\", fontSize: 12 }}>\n              We don't share this information with anyone, and we take as little\n              info as possible.\n            </div>\n          </div>\n        </div>\n      );\n    }\n  }\n\n  uploadedImage(state) {\n    const ref = document.getElementById(\"pic-input\").files;\n    if (ref.length === 0) {\n      return;\n    }\n    const image = ref[0];\n    console.log(image);\n    const blob = URL.createObjectURL(image);\n    if (!image || !blob) {\n      return;\n    }\n    this.setState({ [state]: blob, activeImage: image, croppingPicture: true });\n  }\n\n  setCroppedImg(croppedImgUrl) {\n    this.setState({\n      croppedImg: croppedImgUrl,\n    });\n  }\n  handleTakePhoto(dataUri, type) {\n    this.setState({\n      [type]: dataUri,\n      croppingPicture: true,\n    });\n  }\n\n  clickPrev() {\n    const { currentInput } = this.state;\n    this.setState({\n      currentInput: currentInput - 1,\n    });\n  }\n\n  async updateDatabase() {\n    const { currentInput, name, escoraId, croppedImg } = this.state;\n    const myDocRef = firebase.firestore().collection(\"Providers\").doc(\"abc\");\n\n    if (currentInput === 0) {\n      await myDocRef.update({\n        first_name: name,\n      });\n    } else if (currentInput === 1) {\n      await myDocRef.update({\n        escora_id: escoraId,\n      });\n    } else if (currentInput === 2) {\n      console.log(croppedImg);\n      const storageRef = firebase\n        .storage()\n        .ref()\n        .child(\"abc\")\n        .child(\"profile_picture\");\n\n      await storageRef.put(croppedImg);\n      const url = await storageRef.getDownloadURL();\n      await myDocRef.update({\n        picture: url,\n      });\n    } else if (currentInput === 3) {\n    } else if (currentInput === 4) {\n    } else {\n    }\n  }\n\n  sendEmail() {\n    const { currentInput } = this.state;\n    if (currentInput === 0) {\n      const email = document.getElementById(\"email-input\").value;\n      // Bad email?\n      if (!checkEmail(email)) {\n        return;\n      }\n      this.sendSignInLinkToEmail(email);\n    }\n  }\n\n  // Next button clicked!\n  async clickNext() {\n    const { currentInput } = this.state;\n    // What input are we on?\n\n    await this.updateDatabase();\n    this.setState({\n      currentInput: currentInput + 1,\n    });\n  }\n\n  // Send the sign in link to our email\n  sendSignInLinkToEmail(email) {\n    var actionCodeSettings = {\n      // URL you want to redirect back to. The domain (www.example.com) for this\n      // URL must be whitelisted in the Firebase Console.\n      url: \"https://escora.io/verifyemail?email=\" + email,\n      // This must be true.\n      handleCodeInApp: true,\n    };\n    // Get our actioncode settings\n    // Send the link in the email\n    firebase\n      .auth()\n      .sendSignInLinkToEmail(email, actionCodeSettings)\n      .then(() => {\n        window.localStorage.setItem(\"email\", email);\n        this.setState({\n          currentInput: this.state.currentInput + 1,\n        });\n      })\n      .catch((e) => {\n        console.log(e.message);\n        alert(\"Something happened. Try again.\");\n      });\n  }\n}\n"]},"metadata":{},"sourceType":"module"}